{% extends 'base.html' %}
{% load staticfiles %}
{% load modtag %}
{% block head %}
    <link href="{% static 'css/results.css' %}" rel="stylesheet">
    <link href="{% static 'css/results_pager.css' %}" rel="stylesheet">
    <script src = "{% static 'js/results_pagination.js' %}"></script>
{% endblock %}
{% block content %} 
<div class="container">
    <div class="row">
        <div class="jumbotron">
        <a href="{% url 'explanation' %}">explanation</a>
        {% if res %}
            <table class="table table-striped tablerow" id="results">
            <thead>
                <tr>
                    <th>Row</th>
                    <th>Course Name</th>
                    <th>Details</th>
                    <th>Universities</th>
                    <th>Favorites</th>
                </tr>
            </thead>
            <tbody>
            {%for key,values in courses.iteritems%}
                <tr class="tablerow">
                    <td height="80"><h4>{{forloop.counter }}</h4></td>
                    <td class = "rowcourse" height="80"><h4>{{key}}</h4></td><td>
                {%for value in values%}
                    {% if forloop.first and value|length%}
                        <div class="dropdown">
                             <button class="btn btn-info btn-xs  viewbutton dropdown-toggle " name="{{forloop.parentloop.counter}}" value="{{value}}" type="button" id="menu{{forloop.parentloop.counter}}" data-toggle="dropdown" onclick="MyFunction(this.value,this.name)">overview<span class="caret"></span></button> 
                              <ul class="dropdown-menu dropsize" role="menu" aria-labelledby="menu{{forloop.parentloop.counter}}">
                                <li class="dropdown-header">Course Overview</li>
                                <li class="divider"></li>
                                <li class="desc" id="change{{forloop.parentloop.counter}}"></li>
                              </ul>
                        </div></td><td class="rowuni" height="80">
                    {% else %}
                        {% if forloop.first %}
                            </td><td class="rowuni" height="80">
                        {% else %}    
                            <h4>{{value}}</h4>
                        {% endif %}    
                    {% endif %}
                {%endfor%}
                </td> 
                <td>
                    <button class="btn btn-success btn-xs addbutton" id="add{{forloop.counter}}" value="{{forloop.counter}}">add</button>
                    <button class="btn btn-danger btn-xs rembutton disabled" id="rem{{forloop.counter}}" value="{{forloop.counter}}">remove</button>
                    <div class="rating">
                        {% if forloop.counter|mod:2 %}
                            <span class="star st">&#9734;</span>
                        {% else %}
                            <span class="star1 st">&#9734;</span> 
                        {% endif %}
                    </div>
                </td>
                </tr>
            {%endfor%}
            </tbody>
            </table>
            <div id="pageNavPosition"></div>
            <p id="showresults"></p>
		{% else %}
    		<p>No result</p>
		{% endif %}
        </div>
    </div>
</div>
{% endblock %}
{% block javascript %}
    <script>
        var pager = new Pager('results', 7,'showresults'); 
        pager.init();
        pager.showPageNav('pager', 'pageNavPosition'); 
        pager.showPage(1);
        function MyFunction(clicked,num){
            var h = "change"+num;
            var text = document.getElementById(h);
            text.innerHTML = clicked;
        }
        $('.btn-success').click(function(){
            $(this).addClass("disabled");
            $(this).next().removeClass("disabled");
            $(this).siblings("div").children().addClass("full");
        });    
        $('.btn-danger').click(function(){
            $(this).addClass("disabled");
            $(this).prev().removeClass("disabled");
            $(this).siblings("div").children().removeClass("full");
        });
    </script>
{% endblock %}